{"version":3,"file":"commonHelpers.js","sources":["../src/favarite-list.js"],"sourcesContent":["import common from './localStorage.json';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  list: document.querySelector('.favorite_list'),\n  btnClear: document.querySelector('.btn_clear'),\n};\n\nconst storageData = JSON.parse(localStorage.getItem(common.LS)) ?? [];\nelements.btnClear.addEventListener('click', onBtnClearClick);\nelements.list.addEventListener('click', onDeleteClick);\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ id, downloads, views, likes, webformatURL, tags, largeImageURL }) =>\n        `<li data-id=\"${id}\" class=\"gallery_item\">\n        <a class=\"gallery_link\" href=\"${largeImageURL}\">\n          <img class=\"gallery_img\" src=\"${webformatURL}\" data-sourse=\"${largeImageURL}\" alt=\"${tags}\" />\n        </a>\n        <ul class=\"gallery_item_params\">\n          <li class=\"gallery_item_params_link\">\n            <svg class=\"gallery_svg\" width=\"24\" height=\"24\">\n              <use href=\"./img/sprite.svg#icon-downloads\"></use>\n            </svg>\n            ${downloads}\n          </li>\n          <li class=\"gallery_item_params_link\">\n            <svg class=\"gallery_svg\" width=\"24\" height=\"24\">\n              <use href=\"./img/sprite.svg#icon-heart\"></use>\n            </svg>\n            ${likes}\n          </li>\n          <li class=\"gallery_item_params_link\">\n            <svg class=\"gallery_svg\" width=\"24\" height=\"24\">\n              <use href=\"./img/sprite.svg#icon-search\"></use>\n            </svg>\n            ${views}\n          </li>\n          <li class=\"gallery_item_params_link current\">\n           <svg width=\"40\" height=\"40\">\n          <use class=\"favorite_svg\"  href=\"./img/sprite.svg#icon-basket-delete\"></use>\n        </svg>\n        </li>\n          </ul>\n          \n          </li>\n          `\n    )\n    .join('');\n}\n\nelements.list.insertAdjacentHTML('beforeend', createMarkup(storageData));\nconst galleryLibrary = new SimpleLightbox('.favorite_list a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\ngalleryLibrary.refresh();\n\nfunction onBtnClearClick(evt) {\n  localStorage.removeItem(common.LS);\n  window.location.href = './index.html';\n}\n\nfunction onDeleteClick(evt) {\n  const currentImgs = evt.target.closest('.gallery_item');\n  console.log(currentImgs);\n  const currentId = Number(currentImgs.dataset.id);\n  // console.log(currentId);\n  if (!currentImgs) {\n    return;\n  }\n  const currentDdelete = evt.target.classList.contains('favorite_svg');\n  if (!currentDdelete) {\n    return;\n  }\n  currentImgs.remove();\n  const selectDelete = storageData.findIndex(({ id }) => id === currentId);\n  if (selectDelete !== -1) {\n    storageData.splice(selectDelete, 1);\n  }\n  localStorage.setItem(common.LS, JSON.stringify(storageData));\n}\n"],"names":["elements","storageData","common","onBtnClearClick","onDeleteClick","createMarkup","arr","id","downloads","views","likes","webformatURL","tags","largeImageURL","galleryLibrary","SimpleLightbox","evt","currentImgs","currentId","selectDelete"],"mappings":"sGAIA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,gBAAgB,EAC7C,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEMC,EAAc,KAAK,MAAM,aAAa,QAAQC,EAAO,EAAE,CAAC,GAAK,GACnEF,EAAS,SAAS,iBAAiB,QAASG,CAAe,EAC3DH,EAAS,KAAK,iBAAiB,QAASI,CAAa,EACrD,SAASC,EAAaC,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAC,EAAI,UAAAC,EAAW,MAAAC,EAAO,MAAAC,EAAO,aAAAC,EAAc,KAAAC,EAAM,cAAAC,CAAe,IACjE,gBAAgBN,CAAE;AAAA,wCACcM,CAAa;AAAA,0CACXF,CAAY,kBAAkBE,CAAa,UAAUD,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAOrFJ,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAMTE,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAMLD,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAWd,EACA,KAAK,EAAE,CACZ,CAEAT,EAAS,KAAK,mBAAmB,YAAaK,EAAaJ,CAAW,CAAC,EACvE,MAAMa,EAAiB,IAAIC,EAAe,mBAAoB,CAC5D,aAAc,IACd,aAAc,KAChB,CAAC,EACDD,EAAe,QAAO,EAEtB,SAASX,EAAgBa,EAAK,CAC5B,aAAa,WAAWd,EAAO,EAAE,EACjC,OAAO,SAAS,KAAO,cACzB,CAEA,SAASE,EAAcY,EAAK,CAC1B,MAAMC,EAAcD,EAAI,OAAO,QAAQ,eAAe,EACtD,QAAQ,IAAIC,CAAW,EACvB,MAAMC,EAAY,OAAOD,EAAY,QAAQ,EAAE,EAM/C,GAJI,CAACA,GAID,CADmBD,EAAI,OAAO,UAAU,SAAS,cAAc,EAEjE,OAEFC,EAAY,OAAM,EAClB,MAAME,EAAelB,EAAY,UAAU,CAAC,CAAE,GAAAM,KAASA,IAAOW,CAAS,EACnEC,IAAiB,IACnBlB,EAAY,OAAOkB,EAAc,CAAC,EAEpC,aAAa,QAAQjB,EAAO,GAAI,KAAK,UAAUD,CAAW,CAAC,CAC7D"}